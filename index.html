let player;

function createPlayer() {
  if (player) {
    player.destroy();
  }
  player = new YT.Player("player", {
    height: "200",
    width: "320",
    videoId: "RPzZk8gK_EQ",
    events: {
      onReady: onPlayerReady,
      onStateChange: onPlayerStateChange,
    },
  });
}

function onYouTubeIframeAPIReady() {
  // don't create the player here yet
  // create player when lesson starts instead
}

function onPlayerReady(event) {
  event.target.playVideo();
}

function onPlayerStateChange(event) {
  if (event.data === YT.PlayerState.ENDED) {
    document.getElementById("quiz").style.display = "block";
  }
}

function startLesson() {
  document.getElementById("welcome").style.display = "none";
  document.getElementById("video-screen").style.display = "block";
  document.getElementById("quiz").style.display = "none";
  document.getElementById("quiz-result").textContent = "";
  document.getElementById("finish-btn").style.display = "none";

  createPlayer(); // create and start fresh player here
}
